<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Create Your Company Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background:#f6f8fb; }
    .topbar { background:#1e73f5; color:#fff; padding:14px 20px; border-radius:6px 6px 0 0; }
    .card.custom { border-radius:8px; box-shadow: 0 6px 20px rgba(27,40,65,0.06); overflow: visible; }
    .section-title { font-weight:700; margin-bottom:8px; }
    .small-muted { color:#6c757d; font-size:0.9rem; margin-bottom:12px; }
    .upload-box { border:1px dashed #d0d7df; border-radius:6px; padding:18px; text-align:center; background:#fff; }
    .upload-btn { margin-left:8px; }
    .btn-footer { min-width:150px; }
    .form-floating .form-control { height: calc(2.4rem + 1px); }
    label.required::after { content:" *"; color:#d00; }
  </style>
</head>
<body>
<div class="container py-4">
  <div class="mx-auto" style="max-width:960px;">
    <div class="card custom">
      <div class="topbar d-flex align-items-center">
        <div style="font-weight:700; display:flex; align-items:center;">
          <div style="width:28px;height:28px;border-radius:6px;background:#fff;color:#1e73f5;display:flex;align-items:center;justify-content:center;font-weight:700;margin-right:10px">E</div>
          ExMart
        </div>
      </div>

      <div class="card-body">
        <h4 class="text-center mt-2">Create Your Company Profile</h4>
        <p class="text-center small-muted">Help buyers know your business better</p>

        <!-- 1. Company Information -->
        <div class="mb-4">
          <div class="section-title">1. Company Information</div>

          <div class="row g-3">
            <div class="col-md-6">
              <input class="form-control" name="company_name" form="onboardForm" placeholder="Company Name">
            </div>
            <div class="col-md-6">
              <input class="form-control" name="brand_name" form="onboardForm" placeholder="Brand Name (Optional)">
            </div>

            <div class="col-md-6">
              <select class="form-select" name="business_type" form="onboardForm">
                <option value="">Business Type</option>
                <option>Manufacturer</option>
                <option>Distributor</option>
                <option>Retailer</option>
                <option>Service Provider</option>
              </select>
            </div>

            <div class="col-md-6">
              <select class="form-select" name="industry_category" form="onboardForm">
                <option value="">Industry / Category</option>
                <option>Agriculture</option>
                <option>Chemicals</option>
                <option>Food Products</option>
                <option>Machinery</option>
              </select>
            </div>

            <div class="col-md-8">
              <input class="form-control" name="year_of_establishment" form="onboardForm" placeholder="Year of Establishment">
            </div>
            <div class="col-md-4">
              <div class="d-flex">
                <input type="file" name="registration_doc" form="onboardForm" class="form-control" style="flex:1" />
                <button class="btn btn-outline-secondary upload-btn" disabled>Upload</button>
              </div>
            </div>
          </div>
        </div>

        <!-- 2. Contact Details -->
        <div class="mb-4">
          <div class="section-title">2. Contact Details</div>
          <div class="row g-3">
            <div class="col-md-6">
              <input class="form-control" name="contact_person" form="onboardForm" placeholder="Owner / Contact Person Name">
            </div>
            <div class="col-md-6">
              <input class="form-control" name="designation" form="onboardForm" placeholder="Designation (Optional)">
            </div>

            <div class="col-md-4">
              <div class="input-group">
                <span class="input-group-text">+91</span>
                <input class="form-control" name="mobile_number" form="onboardForm" placeholder="Mobile Number">
              </div>
            </div>
            <div class="col-md-4">
              <input class="form-control" name="alt_mobile_number" form="onboardForm" placeholder="Alternate Mobile Number (Optional)">
            </div>
            <div class="col-md-4">
              <input class="form-control" name="email" form="onboardForm" placeholder="Email ID">
            </div>
          </div>
        </div>

        <!-- 3. Address -->
        <div class="mb-4">
          <div class="section-title">3. Address</div>
          <div class="row g-3">
            <div class="col-md-6">
              <input class="form-control" name="registered_address" form="onboardForm" placeholder="Registered Address">
            </div>
            <div class="col-md-3">
              <select class="form-select" name="state" form="onboardForm">
                <option value="">State</option>
                <option>Maharashtra</option>
                <option>Gujarat</option>
              </select>
            </div>
            <div class="col-md-3">
              <select class="form-select" name="district" form="onboardForm">
                <option value="">District / City</option>
                <option>Mumbai</option>
                <option>Ahmedabad</option>
              </select>
            </div>

            <div class="col-md-4">
              <input class="form-control" name="pincode" form="onboardForm" placeholder="Pincode">
            </div>
            <div class="col-md-8">
              <input class="form-control" name="google_map_location" form="onboardForm" placeholder="Google Map Location">
            </div>
          </div>
        </div>

        <!-- 4. Business Documents -->
        <div class="mb-4">
          <div class="section-title">4. Business Documents</div>
          <div class="row g-3">
            <div class="col-md-6">
              <input class="form-control" name="gst_number" form="onboardForm" placeholder="GST Number">
            </div>
            <div class="col-md-6">
              <div class="d-flex">
                <input type="file" name="udysm_msme" form="onboardForm" class="form-control" />
                <button class="btn btn-outline-secondary upload-btn" disabled>Upload</button>
              </div>
            </div>

            <div class="col-md-6">
              <input class="form-control" name="pam_number" form="onboardForm" placeholder="PAM Number">
            </div>
            <div class="col-md-6">
              <select class="form-select" name="num_employees" form="onboardForm">
                <option value="">No. of Employees</option>
                <option>1-10</option>
                <option>11-50</option>
                <option>51-200</option>
                <option>200+</option>
              </select>
            </div>
          </div>
        </div>

        <!-- 5. About Your Business -->
        <div class="mb-4">
          <div class="section-title">5. About Your Business</div>
          <div class="mb-2">
            <textarea class="form-control" name="description" form="onboardForm" rows="4" placeholder="Company Description / About Us (max -500 characters)"></textarea>
          </div>

          <div class="row g-3">
            <div class="col-md-6">
              <input class="form-control" name="key_products" form="onboardForm" placeholder="Key Products / Services Offered">
            </div>
            <div class="col-md-6">
              <input class="form-control" name="intro_video" form="onboardForm" placeholder="Intro Video Link (Optional)">
            </div>
          </div>
        </div>

        <!-- 6. Media & Presentation -->
        <div class="mb-4">
          <div class="section-title">6. Media & Presentation</div>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Company Banner Image (16:3)</label>
              <input type="file" class="form-control" name="banner_image" form="onboardForm">
            </div>
            <div class="col-md-6">
              <label class="form-label">Product Catalog PDF (Optional)</label>
              <input type="file" class="form-control" name="catalog_pdf" form="onboardForm">
            </div>
          </div>
        </div>

        <!-- Footer Buttons -->
        <div class="d-flex justify-content-between align-items-center mt-3">
          <div>
            <button form="onboardForm" name="action" value="draft" class="btn btn-outline-secondary btn-footer">Save as Draft</button>
          </div>
          <div class="d-flex gap-2">
            <button form="onboardForm" name="action" value="preview" class="btn btn-outline-primary btn-footer">Preview Profile</button>
            <button form="onboardForm" name="action" value="submit" class="btn btn-primary btn-footer">Submit for Review</button>
          </div>
        </div>
      </div>
    </div>

    <!-- hidden form that collects all inputs for POST -->
    <form id="onboardForm" method="post" enctype="multipart/form-data" action="/supplier/onboard"></form>

    <!-- feedback -->
    {% if request.query_params.get('submitted') %}
      <div class="alert alert-success mt-3">Profile submitted successfully. ID: {{ request.query_params.get('id') }}</div>
    {% endif %}
  </div>
</div>

<script>
  // show file name preview for file inputs
  document.querySelectorAll('input[type="file"]').forEach(function(inp){
    inp.addEventListener('change', function(e){
      const name = (e.target.files && e.target.files[0]) ? e.target.files[0].name : '';
      if(name){
        // create a small label near input
        const parent = e.target.parentElement;
        let label = parent.querySelector('.file-name');
        if(!label){
          label = document.createElement('div');
          label.className = 'file-name small text-muted mt-1';
          parent.appendChild(label);
        }
        label.textContent = name;
      }
    });
  });
</script>
</body>
</html>
